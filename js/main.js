"use strict";var map;function initMap(){setMarkers(map=new google.maps.Map(document.getElementById("map"),{center:{lat:59.939095,lng:30.315868},zoom:12,disableDefaultUI:!0,gestureHandling:"cooperative"}))}!function(){var e=document.querySelector("#hamburger"),t=document.querySelector("#fullscreen-menu"),n=document.querySelector("#close-fs-menu"),a=t.querySelectorAll(".menu__link");function r(){e.classList.toggle("hamburger--active"),t.classList.toggle("fullscreen-menu--active")}e.addEventListener("click",function(e){e.preventDefault(),r()}),n.addEventListener("click",r),a.forEach(function(e){e.addEventListener("click",r)})}();var coords=[{lat:59.94554327989287,lng:30.38935262114668},{lat:59.91142323563909,lng:30.50024587065841},{lat:59.88693161784606,lng:30.319658102103713},{lat:59.97033574821672,lng:30.315194906302924}];function setMarkers(e){for(var t={url:"./img/icons/marker.png",size:new google.maps.Size(46,57),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(23,57)},n=0;n<coords.length;n++){var a=coords[n];new google.maps.Marker({position:a,map:e,icon:t})}}!function(){function a(e){e.find(".menu-acco__item").removeClass("active")}$(".menu-acco__trigger").click(function(e){var t=$(e.currentTarget),n=t.closest(".menu-acco");e.preventDefault(),t.closest(".menu-acco__item").hasClass("active")?a(n):(a(n),t.closest(".menu-acco__item").addClass("active"))}),$(".menu-acco__close-menu").click(function(e){var t=$(e.currentTarget).closest(".menu-acco");e.preventDefault(),a(t)})}(),$(".form").submit(function(e){e.preventDefault();var t=$(e.currentTarget),n=t.find("[name='name']"),a=t.find("[name='phone']"),r=t.find("[name='comment']"),o=t.find("[name='to']"),c=$("#modal").find(".modal__content"),e=(e=t,[n,a,r,o].forEach(function(e){e.removeClass("form__input-error"),""===e.val().trim()&&e.addClass("form__input-error")}),0===e.find(".form__input-error").length);c.removeClass("error"),e&&((o=$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:n.val(),phone:a.val(),comment:r.val(),to:o.val()}})).done(function(e){c.text(e.message),$(t).trigger("reset")}),o.fail(function(e){c.text(e.responseJSON.message),c.addClass("error")}),o.always(function(e){$.fancybox.open({src:"#modal",type:"inline"})}))}),$(".app-close-modal").click(function(e){e.preventDefault(),$.fancybox.close()}),function(){function a(e){var t;i||(i=!0,t=-100*e,n.css({transform:"translateY(".concat(t,"%)")}),t=e,o.eq(t).addClass("active").siblings().removeClass("active"),e=e,c.find(".fixed-menu__item").eq(e).addClass("active").siblings().removeClass("active"),setTimeout(function(){i=!1},800))}function r(){var e=o.filter(".active"),t=e.next(),n=e.prev();return{next:function(){t.length&&a(t.index())},prev:function(){n.length&&a(n.index())}}}var o=$("section"),n=$(".main-content"),c=$(".fixed-menu"),e=new MobileDetect(window.navigator.userAgent).mobile(),i=!1;o.first().addClass("active"),c.find(".fixed-menu__item").first().addClass("active"),$(window).on("wheel",function(e){var t=e.originalEvent.deltaY,e=r();t<0&&e.prev(),0<t&&e.next()}),$(window).on("keydown",function(e){var t=e.target.tagName.toLowerCase(),n="input"===t||"textarea"===t,t=r();if(!n)switch(e.keyCode){case 38:t.prev();break;case 40:t.next()}}),$(".wrapper").on("touchmove",function(e){return e.preventDefault()}),$("[data-scroll-to]").click(function(e){e.preventDefault();e=$(e.currentTarget).attr("data-scroll-to"),e=$("[data-section-id=".concat(e,"]"));a(e.index())}),e&&$("body").swipe({swipe:function(e,t){r()["down"===t?"prev":"up"===t?"next":""]()}})}(),function(){function t(){n.paused?(e.classList.remove("paused"),n.play()):(n.pause(),e.classList.add("paused"))}var e=document.querySelector(".player__video-block"),n=document.querySelector("#video"),a=document.querySelector(".player__poster"),r=document.querySelector(".player__play"),o=document.querySelector(".player__playback"),c=document.querySelector("#playback-button"),i=document.querySelector(".player__volume"),l=document.querySelector("#volume-button"),s=document.querySelector("#playback-range"),u=document.querySelector("#volume-range");a.addEventListener("click",function(){t()}),n.addEventListener("click",function(){t()}),r.addEventListener("click",function(e){e.preventDefault(),t()}),n.addEventListener("timeupdate",function(){var e=n.currentTime/n.duration*100,t=100-e;c.style.left=e+"%",s.style.right=t+"%"}),o.addEventListener("click",function(e){e=e.layerX/o.clientWidth*100;c.style.left=e+"%",n.currentTime=e*n.duration/100}),i.addEventListener("click",function(e){var t=e.layerX/i.clientWidth*100,e=100-t;n.muted=!1,l.style.left=t+"%",n.volume=t/100,u.style.right=e+"%"})}(),$(".interactive-avatar__link").click(function(e){e.preventDefault();var n,t=$(e.currentTarget),e=t.attr("data-open"),e=(n=e,$(".reviews__item").filter(function(e,t){return $(t).attr("data-linked-with")===n})),t=t.closest(".interactive-avatar");e.addClass("active").siblings().removeClass("active"),t.addClass("active").siblings().removeClass("active")}),function(){var t=$(".products").bxSlider({pager:!1,controls:!1});$(".products-slider__arrow.arrow-left").click(function(e){e.preventDefault(),t.goToPrevSlide()}),$(".products-slider__arrow.arrow-right").click(function(e){e.preventDefault(),t.goToNextSlide()})}(),function(){function a(e){var t=e.find(".team__content");e.find(".team__item").removeClass("active"),t.height(0)}$(".team__item-title").click(function(e){var t=$(e.currentTarget),n=t.closest(".team__list");t.closest(".team__item").hasClass("active")?a(n):(a(n),n=(e=t).closest(".team__item"),t=n.find(".team__content"),e=t.find(".team__content-block").height(),n.addClass("active"),t.height(e))})}();